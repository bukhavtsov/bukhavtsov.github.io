<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>How to integrate Golang Service with Chat GPT API - ArtemCodes</title><meta name=Description content="Hi there! My name is Artem, Let's build something amazing together!"><meta property="og:url" content="https://artem.codes/posts/golang-server-with-chat-gpt-api/">
<meta property="og:site_name" content="ArtemCodes"><meta property="og:title" content="How to integrate Golang Service with Chat GPT API"><meta property="og:description" content="How to integrate Golang Service with Chat GPT API. Intro In this tutorial we’re going to create a Golang service that communicates with Chat GPT API. The source code you can find here. As a result you should be able to understand how to do it and change the logic for implementing your own use cases."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-01T22:40:00+01:00"><meta property="article:modified_time" content="2024-05-01T22:40:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to integrate Golang Service with Chat GPT API"><meta name=twitter:description content="How to integrate Golang Service with Chat GPT API. Intro In this tutorial we’re going to create a Golang service that communicates with Chat GPT API. The source code you can find here. As a result you should be able to understand how to do it and change the logic for implementing your own use cases."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=../../favicon.ico><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=../../site.webmanifest><link rel=canonical href=https://artem.codes/posts/golang-server-with-chat-gpt-api/><link rel=prev href=https://artem.codes/posts/two-pointers/><link rel=next href=https://artem.codes/posts/jwt_auth/><link rel=stylesheet href=../../css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"How to integrate Golang Service with Chat GPT API","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/artem.codes\/posts\/golang-server-with-chat-gpt-api\/"},"genre":"posts","wordcount":858,"url":"https:\/\/artem.codes\/posts\/golang-server-with-chat-gpt-api\/","datePublished":"2024-05-01T22:40:00+01:00","dateModified":"2024-05-01T22:40:00+01:00","publisher":{"@type":"Organization","name":"Artem Codes","logo":{"@type":"ImageObject","url":"https:\/\/artem.codes\/images\/avatar.jpeg","width":800,"height":800}},"author":{"@type":"Person","name":"Author"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=../../ title=ArtemCodes>Artem Codes</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=../../ title=ArtemCodes>Artem Codes</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">How to integrate Golang Service with Chat GPT API</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=../../ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-05-01>2024-05-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;858 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;5 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#what-well-try-to-develop>What we&rsquo;ll try to develop?</a></li><li><a href=#architecture-overview>Architecture Overview</a></li><li><a href=#step-1-set-up-your-golang-project>Step 1: Set Up Your GoLang Project</a><ul><li><a href=#install-the-echo-web-framework>Install the Echo Web Framework</a></li><li><a href=#initialize-the-echo-server>Initialize the Echo Server</a></li></ul></li><li><a href=#step-2-create-the-translation-handler>Step 2: Create the Translation Handler</a></li><li><a href=#step-3-chatgpt-integration>Step 3: ChatGPT Integration</a><ul><li><a href=#response-structure>Response Structure</a></li></ul></li><li><a href=#step-4-setting-up-environment-variables>Step 4: Setting Up Environment Variables</a></li><li><a href=#step-5-running-the-application>Step 5: Running the Application</a></li><li><a href=#other-materials>Other materials:</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><h1 id=how-to-integrate-golang-service-with-chat-gpt-api>How to integrate Golang Service with Chat GPT API.</h1><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/bcJs56LmDCY?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h2 id=intro>Intro</h2><p>In this tutorial we&rsquo;re going to create a Golang service that communicates with Chat GPT API. The source code you can find <a href=https://github.com/bukhavtsov/golang-server-with-chat-gpt-api target=_blank rel="noopener noreffer">here</a>. As a result you should be able to understand how to do it and change the logic for implementing your own use cases.</p><h2 id=prerequisites>Prerequisites</h2><p>For implementing the solution we need to have:</p><ol><li>API Key to Chat GPT API and at the moment Chat GPT doesn&rsquo;t provide free trial, so you&rsquo;ll have to setup your Open API account and pay <a href=https://openai.com/api/pricing target=_blank rel="noopener noreffer">X</a> per token. But for a pet project it&rsquo;s quite fair price in my opinion.</li><li>Golang installed.</li></ol><h2 id=what-well-try-to-develop>What we&rsquo;ll try to develop?</h2><p>Essentially to get familiar with Chat GPT API we&rsquo;ll try to create a smart dictionary. As an input we&rsquo;ll send a http request with a lexical item and in response we get the meaning, examples of usages.
Architecture will consist of 2 components:</p><ul><li>Backend - Golang application with Echo web framework.</li><li>Chat GPT API that Open AI provides.</li></ul><h2 id=architecture-overview>Architecture Overview</h2><p>Our service will act as a smart dictionary. It will accept a lexical item (a word, phrase, or idiom) from the client and return the meaning and example usages of that item. There will be a single endpoint, which we will access via an HTTP request. The GoLang backend will send prompts to the ChatGPT API to fetch the results.</p><h2 id=step-1-set-up-your-golang-project>Step 1: Set Up Your GoLang Project</h2><p>We’ll be using GoLang’s built-in libraries along with the Echo web framework.</p><h3 id=install-the-echo-web-framework>Install the Echo Web Framework</h3><p>To start, install Echo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go get github.com/labstack/echo/v4
</span></span></code></pre></div><h3 id=initialize-the-echo-server>Initialize the Echo Server</h3><p>First, create a basic Echo server. Here’s how you can initialize the server and set up a logger to track application errors:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;os&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/labstack/echo/v4&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/labstack/echo/v4/middleware&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>echo</span>.<span style=color:#a6e22e>New</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Logger middleware
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>middleware</span>.<span style=color:#a6e22e>Logger</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>middleware</span>.<span style=color:#a6e22e>Recover</span>())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Define the route
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/v1/translations/:lexicalItem&#34;</span>, <span style=color:#a6e22e>translateHandler</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Start the server
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Start</span>(<span style=color:#e6db74>&#34;:8080&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatalf</span>(<span style=color:#e6db74>&#34;Server failed to start: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In this block, we set up the <code>/v1/translations/:lexicalItem</code> endpoint and use basic middleware for logging and error recovery.</p><h2 id=step-2-create-the-translation-handler>Step 2: Create the Translation Handler</h2><p>Next, we’ll create the <code>translateHandler</code> function that will handle incoming translation requests:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>translateHandler</span>(<span style=color:#a6e22e>c</span> <span style=color:#a6e22e>echo</span>.<span style=color:#a6e22e>Context</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lexicalItem</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Param</span>(<span style=color:#e6db74>&#34;lexicalItem&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>lexicalItem</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>, <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;Lexical item wasn&#39;t provided&#34;</span>})
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Call the ChatGPT API to get the translation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>translation</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>translateByChatGPT</span>(<span style=color:#a6e22e>lexicalItem</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>, <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;Failed to translate lexical item&#34;</span>})
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#a6e22e>translation</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In this code, we retrieve the <code>lexicalItem</code> from the URL parameter and handle the request. If the parameter is empty, we return a <code>400 Bad Request</code>. If all goes well, we fetch the translation from ChatGPT.</p><h2 id=step-3-chatgpt-integration>Step 3: ChatGPT Integration</h2><p>To communicate with the ChatGPT API, we will create a function that sends a prompt and processes the response:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>translateByChatGPT</span>(<span style=color:#a6e22e>lexicalItem</span> <span style=color:#66d9ef>string</span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>TranslationResponse</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>prompt</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>`Translate the lexical item &#34;%s&#34;. Provide a response in JSON format with fields: lexicalItem, meaning, and example.`</span>, <span style=color:#a6e22e>lexicalItem</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Set up the request body
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>requestBody</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Marshal</span>(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;model&#34;</span>:    <span style=color:#e6db74>&#34;gpt-3.5-turbo&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;messages&#34;</span>: []<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{{<span style=color:#e6db74>&#34;role&#34;</span>: <span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>: <span style=color:#a6e22e>prompt</span>}},
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewRequest</span>(<span style=color:#e6db74>&#34;POST&#34;</span>, <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Getenv</span>(<span style=color:#e6db74>&#34;CHATGPT_API_URL&#34;</span>), <span style=color:#a6e22e>bytes</span>.<span style=color:#a6e22e>NewBuffer</span>(<span style=color:#a6e22e>requestBody</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Authorization&#34;</span>, <span style=color:#e6db74>&#34;Bearer &#34;</span><span style=color:#f92672>+</span><span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Getenv</span>(<span style=color:#e6db74>&#34;CHATGPT_API_KEY&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Type&#34;</span>, <span style=color:#e6db74>&#34;application/json&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>client</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Client</span>{}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>resp</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Do</span>(<span style=color:#a6e22e>req</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>gptResponse</span> <span style=color:#a6e22e>GPTResponse</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>NewDecoder</span>(<span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>).<span style=color:#a6e22e>Decode</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gptResponse</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Extract the translation response
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>translation</span> <span style=color:#a6e22e>TranslationResponse</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>([]byte(<span style=color:#a6e22e>gptResponse</span>.<span style=color:#a6e22e>Choices</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>Message</span>.<span style=color:#a6e22e>Content</span>), <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>translation</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>translation</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Here, we send a JSON payload to ChatGPT, instructing it to translate the lexical item. The response is expected in JSON format, which we decode into our <code>TranslationResponse</code> struct.</p><h3 id=response-structure>Response Structure</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>TranslationResponse</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LexicalItem</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;lexicalItem&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Meaning</span>     <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;meaning&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Example</span>     <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;example&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>GPTResponse</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Choices</span> []<span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Message</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Content</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;content&#34;`</span>
</span></span><span style=display:flex><span>        } <span style=color:#e6db74>`json:&#34;message&#34;`</span>
</span></span><span style=display:flex><span>    } <span style=color:#e6db74>`json:&#34;choices&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The <code>TranslationResponse</code> struct holds the lexical item, its meaning, and example usages.</p><h2 id=step-4-setting-up-environment-variables>Step 4: Setting Up Environment Variables</h2><p>Before running the service, set up the ChatGPT API credentials. Create a <code>.env</code> file with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-env data-lang=env><span style=display:flex><span>CHATGPT_API_URL<span style=color:#f92672>=</span>https://api.openai.com/v1/completions
</span></span><span style=display:flex><span>CHATGPT_API_KEY<span style=color:#f92672>=</span>your-openai-api-key
</span></span></code></pre></div><p>Ensure you keep this file private and never expose it in public repositories.</p><h2 id=step-5-running-the-application>Step 5: Running the Application</h2><p>To run the service locally, use the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go run main.go
</span></span></code></pre></div><p>Now, you can make requests to the API using curl or Postman. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl http://localhost:8080/v1/translations/test
</span></span></code></pre></div><p>Response example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#34;lexicalItem&#34;</span>:<span style=color:#e6db74>&#34;feasible&#34;</span>,
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#34;meaning&#34;</span>:<span style=color:#e6db74>&#34;possible to do easily or conveniently&#34;</span>,
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#34;example&#34;</span>:<span style=color:#e6db74>&#34;Given our limited resources, it may not be feasible to launch a new product at this time.&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=other-materials>Other materials:</h2><ul><li>introduction to openai api: <a href=https://platform.openai.com/docs/introduction target=_blank rel="noopener noreffer">https://platform.openai.com/docs/introduction</a></li><li>quick start with python: <a href="https://platform.openai.com/docs/quickstart?context=python" target=_blank rel="noopener noreffer">https://platform.openai.com/docs/quickstart?context=python</a></li><li>check token price: <a href=https://platform.openai.com/tokenizer target=_blank rel="noopener noreffer">https://platform.openai.com/tokenizer</a></li></ul><h2 id=conclusion>Conclusion</h2><p>We have built a GoLang service that communicates with the ChatGPT API to translate lexical items. You can extend this project by modifying the prompt or adding more functionality, such as caching or more endpoints.</p><p>Feel free to clone the code from my <a href=https://github.com/bukhavtsov/golang-server-with-chat-gpt-api target=_blank rel="noopener noreffer">GitHub repository</a> and experiment with it. If you have any questions, drop them in the comments below.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2024-05-01</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://artem.codes/posts/golang-server-with-chat-gpt-api/ data-title="How to integrate Golang Service with Chat GPT API"><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://artem.codes/posts/golang-server-with-chat-gpt-api/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://artem.codes/posts/golang-server-with-chat-gpt-api/ data-title="How to integrate Golang Service with Chat GPT API"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://artem.codes/posts/golang-server-with-chat-gpt-api/ data-title="How to integrate Golang Service with Chat GPT API"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://artem.codes/posts/golang-server-with-chat-gpt-api/ data-title="How to integrate Golang Service with Chat GPT API"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=../../>Home</a></span></section></div><div class=post-nav><a href=../../posts/two-pointers/ class=prev rel=prev title="The Incredible Two Pointers technique"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>The Incredible Two Pointers technique</a>
<a href=../../posts/jwt_auth/ class=next rel=next title="JWT Auth with Golang & React">JWT Auth with Golang & React<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=../../ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=../../js/theme.min.js></script></body></html>